{"version":3,"sources":["components/MovieItem.jsx","components/MovieTabs.jsx","utils/api.js","components/PaginationItem.jsx","components/MovieModal.jsx","components/App.jsx","index.js"],"names":["MovieItem","props","state","willWatch","this","data","deleteMovie","addMovieToWillWatch","deleteMovieFromWillWatch","showMovie","className","style","height","src","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","id","React","Component","MovieTabs","sortBy","updateSortBy","getSortBy","value","bind","API_URL","API_KEY_3","PaginationItem","getCheckMinPageClass","getCheckMaxPageClass","maxPage","currentPage","totalPages","switherPage","aria-label","href","disabled","role","aria-disabled","MovieModal","getMovie","movieId","fetch","then","response","json","movie","showMovieId","closeMovie","overview","release_date","tagline","tabIndex","data-dismiss","aria-hidden","width","App","document","querySelector","classList","add","remove","sort_by","event","preventDefault","getMovies","movies","results","total_pages","updateMovies","filter","item","updateMoviesWillWatch","moviesWillWatch","push","localStorage","setItem","JSON","stringify","parse","getItem","prevProps","prevState","map","key","find","length","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8672f43d.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nclass MovieItem extends React.Component {\r\n  constructor(props) {\r\n    super();\r\n    this.state = {\r\n      willWatch: props.willWatch ? true : false,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      data,\r\n      deleteMovie,\r\n      addMovieToWillWatch,\r\n      deleteMovieFromWillWatch,\r\n      showMovie      \r\n    } = this.props;\r\n    \r\n    return (\r\n      <div className=\"card overflow-hidden\" style={{height: \"400px\"}}>\r\n        \r\n          <img\r\n            className=\"card-img-top img-fluid rounded img-responsive\"\r\n            src={`https://image.tmdb.org/t/p/w500${data.backdrop_path ||\r\n              data.poster_path}`}\r\n            alt=\"\"\r\n            style={{height: \"250px\"}}\r\n          />\r\n        \r\n        <div className=\"card-body\">\r\n          <h6 className=\"card-title\">{data.title}</h6>\r\n          <p className=\"mb-2\">Рейтинг: {data.vote_average}</p>\r\n          <div className=\"d-flex justify-content-between align-items-center\">            \r\n            {this.state.willWatch ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-warning\"\r\n                onClick={() => {\r\n                  this.setState({\r\n                    willWatch: false\r\n                  });\r\n                  deleteMovieFromWillWatch(data);\r\n                }}\r\n              >\r\n                Просмотрено\r\n              </button>\r\n              ) : (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success\"\r\n                onClick={() => {\r\n                  this.setState({\r\n                    willWatch: true\r\n                  });\r\n                  addMovieToWillWatch(data);\r\n                }}\r\n              >\r\n                Смотреть позже\r\n              </button>\r\n              )}\r\n\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-info\"\r\n                onClick={() => {\r\n                  showMovie(data.id)\r\n                }}\r\n              >\r\n                Подробнее\r\n              </button>\r\n              \r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-danger\"\r\n                onClick={() => {\r\n                  deleteMovie(data);\r\n                }}\r\n              >\r\n                Удалить\r\n              </button>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieItem;\r\n","import React from \"react\";\r\n\r\nconst MovieTabs = props => {\r\n\r\n  const {sortBy, updateSortBy} = props;\r\n\r\n  const getSortBy = value => {\r\n    return `nav-link ${sortBy === value ? \"active\" : \"\"}`;\r\n  }\r\n\r\n  return (\r\n    <ul className=\"tabs nav nav-pills\">\r\n      <li className=\"nav-item\">\r\n        <div \r\n          className={getSortBy(\"popularity.desc\")}\r\n          onClick={updateSortBy.bind(null, \"popularity.desc\")}\r\n        >\r\n          Популярные по убыванию\r\n        </div>\r\n        <div \r\n          className={getSortBy(\"popularity.asc\")}\r\n          onClick={updateSortBy.bind(null, \"popularity.asc\")}\r\n        >\r\n          Популярные по возрастанию\r\n        </div>\r\n        \r\n      </li>\r\n      \r\n      <li className=\"nav-item\">\r\n        <div \r\n          className={getSortBy(\"revenue.desc\")}\r\n          onClick={updateSortBy.bind(null, \"revenue.desc\")}\r\n        >\r\n          Доход по убыванию\r\n        </div>\r\n        <div \r\n          className={getSortBy(\"revenue.asc\")}\r\n          onClick={updateSortBy.bind(null, \"revenue.asc\")}\r\n        >\r\n          Доход по возрастанию\r\n        </div>\r\n      </li>\r\n      <li className=\"nav-item\">\r\n        <div \r\n          className={getSortBy(\"vote_average.desc\")}\r\n          onClick={updateSortBy.bind(null, \"vote_average.desc\")}\r\n        >\r\n          Рейтинг по убыванию\r\n        </div>\r\n        <div \r\n          className={getSortBy(\"vote_average.asc\")}\r\n          onClick={updateSortBy.bind(null, \"vote_average.asc\")}\r\n        >\r\n          Рейтинг по возрастанию\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default MovieTabs;","export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\r\n\r\nexport const API_KEY_4 =\r\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\r\n","import React from \"react\";\r\n\r\nclass PaginationItem extends React.Component {\r\n\r\n  getCheckMinPageClass = value => {\r\n    return `page-link ${value === 1 ? 'd-none' : ''} `;\r\n  }\r\n\r\n  getCheckMaxPageClass = (value, maxPage) => {\r\n    return `page-link ${value === maxPage ? 'd-none' : ''} `;\r\n  }\r\n\r\n  render() {\r\n    const { currentPage, totalPages, switherPage } = this.props;\r\n    return (\r\n      <nav aria-label=\"Page navigation\">\r\n        <ul className=\"pagination\">\r\n          <li className=\"page-item\">\r\n            <a \r\n              className={this.getCheckMinPageClass(currentPage)} \r\n              href=\"!#\"\r\n              onClick={switherPage.bind(null, currentPage - 1)}>\r\n              Previous\r\n            </a>\r\n          </li>\r\n          <li className=\"page-item\">\r\n            <a \r\n              className={this.getCheckMinPageClass(currentPage)} \r\n              href=\"!#\"\r\n              onClick={switherPage.bind(null, currentPage - 1)}>\r\n              { currentPage !== 1 ? currentPage - 1 : \"\"}\r\n            </a>\r\n          </li>\r\n          <li className=\"page-item\" disabled>\r\n            <a \r\n              className=\"page-link btn-primary disabled\" \r\n              href=\"!#\"\r\n              role=\"button\" \r\n              aria-disabled=\"true\">\r\n              { currentPage }\r\n            </a>\r\n          </li>\r\n          <li className=\"page-item\">\r\n            <a \r\n              className={this.getCheckMaxPageClass(currentPage, totalPages)} \r\n              href=\"!#\"\r\n              onClick={switherPage.bind(null, currentPage + 1)}>\r\n              {currentPage + 1}\r\n            </a>\r\n          </li>\r\n          <li className=\"page-item\">\r\n            <a \r\n              className={this.getCheckMaxPageClass(currentPage, totalPages)} \r\n              href=\"!#\"\r\n              onClick={switherPage.bind(null, totalPages)}>\r\n              {totalPages}\r\n            </a>\r\n          </li>\r\n          <li className=\"page-item\">\r\n            <a \r\n              className={this.getCheckMaxPageClass(currentPage, totalPages)} \r\n              href=\"!#\"\r\n              onClick={switherPage.bind(null, currentPage + 1)}>\r\n              Next\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    )\r\n  }\r\n} \r\n\r\nexport default PaginationItem;","import React, { Component } from \"react\";\r\nimport { API_URL, API_KEY_3 } from \"../utils/api\";\r\n\r\nexport default class MovieModal extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      movie: {}\r\n    }\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.props.showMovieId && this.getMovie(this.props.showMovieId);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.showMovieId  && this.props.showMovieId !== this.state.movie.id) {\r\n      this.getMovie(this.props.showMovieId);\r\n    }\r\n  }\r\n\r\n  getMovie = movieId => {\r\n    fetch(\r\n      `${API_URL}/movie/${movieId}?api_key=${API_KEY_3}&language=ru-Ru`\r\n    )\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.setState({\r\n          movie: data\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { closeMovie } = this.props;\r\n    const { title, overview, poster_path, release_date, tagline} = this.state.movie;\r\n    return (\r\n      <div id=\"movieModal\" className=\"modal\" tabIndex=\"-1\" role=\"dialog\">\r\n        <div className=\"modal-dialog\" role=\"document\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">{\"Название: \" + title + \" Дата релиза: \" + release_date}</h5>\r\n              <button \r\n                type=\"button\" \r\n                className=\"close\" \r\n                data-dismiss=\"modal\" \r\n                aria-label=\"Close\"\r\n                onClick={closeMovie}>\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"row mb-2\">\r\n                <img\r\n                      className=\"offset-md-3\"\r\n                      src={`https://image.tmdb.org/t/p/w500${\r\n                        poster_path\r\n                      }`}\r\n                      width=\"50%\"\r\n                      alt=\"\"\r\n                    />\r\n              </div>\r\n              <div className=\"row\">\r\n                <p>{\"Подзаголовок: \" + tagline}</p>\r\n                <p>{\"Описание: \" + overview}</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button \r\n                type=\"button\" \r\n                className=\"btn btn-secondary\" \r\n                data-dismiss=\"modal\" \r\n                onClick={closeMovie}\r\n              >Закрыть</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport MovieItem from \"./MovieItem\";\r\nimport MovieTabs from \"./MovieTabs\";\r\nimport { API_URL, API_KEY_3 } from \"../utils/api\";\r\nimport PaginationItem from \"./PaginationItem\";\r\nimport MovieModal from \"./MovieModal\";\r\n\r\nclass App extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      movies: [],\r\n      moviesWillWatch: JSON.parse(localStorage.getItem(\"moviesWillWatch\")) || [],\r\n      sort_by: \"popularity.desc\",\r\n      currentPage: 1,\r\n      totalPages: 0,     \r\n      showMovieId: null\r\n    };\r\n  }  \r\n\r\n  showMovie = id => {\r\n    this.setState({\r\n      showMovieId: id\r\n    });\r\n    document.querySelector('#movieModal').classList.add(\"d-block\");\r\n  };\r\n\r\n  closeMovie = () => {\r\n    this.setState({\r\n      showMovieId: null\r\n    });\r\n    document.querySelector('#movieModal').classList.remove(\"d-block\");\r\n  };\r\n\r\n  updateSortBy = value => {\r\n    this.setState({\r\n      sort_by: value,\r\n      currentPage: 1\r\n    });\r\n  }\r\n\r\n  switherPage = (value, event) => {\r\n    event.preventDefault();\r\n    this.setState({\r\n      currentPage: value\r\n    });\r\n  }\r\n\r\n  getMovies = () => {\r\n    fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&language=ru-RU&sort_by=${this.state.sort_by}&page=${this.state.currentPage}`)\r\n      .then(response => response.json())\r\n      .then(data => \r\n        this.setState({\r\n          movies: data.results,\r\n          totalPages: data.total_pages\r\n        })\r\n      )\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getMovies();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.sort_by !== this.state.sort_by || prevState.currentPage !== this.state.currentPage) {\r\n      this.getMovies();\r\n    }\r\n  }\r\n\r\n  deleteMovie = movie => {\r\n    const updateMovies = this.state.movies.filter(item => item.id !== movie.id);\r\n    this.setState({\r\n      movies: updateMovies\r\n    });\r\n  };\r\n\r\n  addMovieToWillWatch = movie => {\r\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch];\r\n    updateMoviesWillWatch.push([movie.id, movie.title, movie.vote_average]);\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n\r\n    localStorage.setItem('moviesWillWatch', JSON.stringify(updateMoviesWillWatch))\r\n  };\r\n\r\n  deleteMovieFromWillWatch = movie => {\r\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(\r\n      item => item[0] !== movie.id\r\n    );\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n    \r\n    localStorage.setItem('moviesWillWatch', JSON.stringify(updateMoviesWillWatch))\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        \r\n        <div className=\"row mt-4\">\r\n          <div className=\"col-9\">\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-12\">\r\n                <MovieTabs sortBy={this.state.sort_by} updateSortBy={this.updateSortBy} />\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              {this.state.movies.map(movie => {\r\n                return (\r\n                  <div className=\"col-6 mb-4 mh-50\" key={movie.id}>\r\n                    <MovieItem\r\n                      data={movie}\r\n                      deleteMovie={this.deleteMovie}\r\n                      addMovieToWillWatch={this.addMovieToWillWatch}\r\n                      deleteMovieFromWillWatch={this.deleteMovieFromWillWatch}\r\n                      showMovie={this.showMovie}\r\n                      willWatch={this.state.moviesWillWatch.find(item => item[0] === movie.id)}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <h4 >Смотреть позже: <span className=\"badge badge-primary\">{this.state.moviesWillWatch.length}</span></h4>\r\n            <ul className=\"list-group\">\r\n              {this.state.moviesWillWatch.map(movie => (\r\n                <li key={movie[0]} className=\"list-group-item\">\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <p>{movie[1]}</p>\r\n                    <p>{movie[2]}</p>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col offset-md-4\">\r\n            <PaginationItem \r\n              currentPage = {this.state.currentPage}\r\n              totalPages = {this.state.totalPages}\r\n              switherPage = {this.switherPage}\r\n            />\r\n          </div>\r\n        </div>\r\n        <MovieModal showMovieId={this.state.showMovieId} closeMovie={this.closeMovie}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./stylesheets/index.scss\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}